
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>[TIL] Upgrade JDK Version và Reset mật khẩu MySQL trên CentOS</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=86b5d143e2">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/monokai_sublime.min.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,500,500italic,700,700italic&amp;subset=latin,latin-ext,vietnamese">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/jqcloud/1.0.4/jqcloud.css">

    <link rel="canonical" href="http://localhost:2368/reset-mat-khau-mysql-tren-centos/">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="viphat's notes">
    <meta property="og:type" content="article">
    <meta property="og:title" content="[TIL] Upgrade JDK Version và Reset mật khẩu MySQL trên CentOS">
    <meta property="og:description" content=":), Mùng 2 tết, rãnh rỗi sinh nông nỗi nên muốn tìm việc gì đó hay hay để làm. Sực nhớ một thứ mà mình dự định làm trong tết là ngồi cài Jira lên con Cloud VPS đang trống của...">
    <meta property="og:url" content="http://localhost:2368/reset-mat-khau-mysql-tren-centos/">
    <meta property="article:published_time" content="2016-02-09T04:13:09.293Z">
    <meta property="article:modified_time" content="2016-02-09T04:13:09.291Z">
    <meta property="article:tag" content="mysql">
    <meta property="article:tag" content="java">
    <meta property="article:tag" content="System Administrators">
    <meta property="article:tag" content="Today I Learned">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="[TIL] Upgrade JDK Version và Reset mật khẩu MySQL trên CentOS">
    <meta name="twitter:description" content=":), Mùng 2 tết, rãnh rỗi sinh nông nỗi nên muốn tìm việc gì đó hay hay để làm. Sực nhớ một thứ mà mình dự định làm trong tết là ngồi cài Jira lên con Cloud VPS đang trống của...">
    <meta name="twitter:url" content="http://localhost:2368/reset-mat-khau-mysql-tren-centos/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "viphat's notes",
    "author": {
        "@type": "Person",
        "name": "Duong Vi Phat",
        "image": "http://localhost:2368/content/images/2015/09/avatar-ninja.png",
        "url": "http://localhost:2368/author/viphat",
        "sameAs": null,
        "description": null
    },
    "headline": "[TIL] Upgrade JDK Version và Reset mật khẩu MySQL trên CentOS",
    "url": "http://localhost:2368/reset-mat-khau-mysql-tren-centos/",
    "datePublished": "2016-02-09T04:13:09.293Z",
    "dateModified": "2016-02-09T04:13:09.291Z",
    "keywords": "mysql, java, System Administrators, Today I Learned",
    "description": ":), Mùng 2 tết, rãnh rỗi sinh nông nỗi nên muốn tìm việc gì đó hay hay để làm. Sực nhớ một thứ mà mình dự định làm trong tết là ngồi cài Jira lên con Cloud VPS đang trống của..."
}
    </script>

    <meta name="generator" content="Ghost 0.7">
    <link rel="alternate" type="application/rss+xml" title="viphat's notes" href="http://localhost:2368/rss/">

</head>
<body class="post-template tag-mysql tag-java tag-system-administrators tag-today-i-learned">

    

<main class="content" role="main">
    <div id="toc"></div>
    <nav class="main-nav">
          <i class="fa fa-bars js-main-menu-open element-light right" style="font-size:30px; margin-left:5px;"></i>
    </nav>
    <article class="post tag-mysql tag-java tag-system-administrators tag-today-i-learned">



        <header class="post-header">
            <a id="blog-logo" href="http://localhost:2368">
                    <img src="../content/images/2015/06/988902_10153164942799169_3258802522813421684_n.jpg" alt="notes.viphat.work">
            </a>
        </header>


        <span class="post-meta"><time datetime="2016-02-09">09 Feb 2016</time> on <a href="../tag/mysql/">mysql</a> | <a href="../tag/java/">java</a> | <a href="../tag/system-administrators/">System Administrators</a> | <a href="../tag/today-i-learned/">Today I Learned</a></span>

        <h1 class="post-title">[TIL] Upgrade JDK Version và Reset mật khẩu MySQL trên CentOS</h1>

        <section class="post-content">
            <p>:), Mùng 2 tết, rãnh rỗi sinh nông nỗi nên muốn tìm việc gì đó hay hay để làm. Sực nhớ một thứ mà mình dự định làm trong tết là ngồi cài Jira lên con Cloud VPS đang trống của Công ty để dùng thử và tiết kiệm chi phí (thay vì phải trả phí hàng tháng cho Atlassian thì sẽ tự host và trả phí bản quyền 1 lần thôi.). Vậy là phải đọc <a href="https://confluence.atlassian.com/adminjiraserver070/installing-jira-applications-on-linux-749382634.html">Installation Guide</a> rồi tiến hành thôi.</p>

<p>Đọc requirements, mình thấy rằng có 2 việc cần phải làm trước, đó là upgrade JDK từ 1.7 lên 1.8 và sau đó là reset mật khẩu root của mysql (mình không nắm pass root của mysql, do một chú đồng nghiệp set nhưng không viết lại cho Core Team.)</p>

<h3 id="nngcpjdk">Nâng cấp JDK</h3>

<p>Xem phiên bản JDK hiện tại</p>

<pre><code>java -version  
</code></pre>

<p>Download bản JDK 1.8 mới nhất từ Oracle về và giải nén:</p>

<pre><code>cd /opt/  
wget --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie" "http://download.oracle.com/otn-pub/java/jdk/8u72-b15/jdk-8u72-linux-x64.tar.gz"  
tar xzf jdk-8u72-linux-x64.tar.gz  
</code></pre>

<p>Tiến hành nâng cấp bằng lệnh <code>alternatives</code> (Lệnh này nằm trong gói <code>chkconfig</code>:</p>

<pre><code>cd /opt/jdk1.8.0_72/  
alternatives --install /usr/bin/java java /opt/jdk1.8.0_72/bin/java 2  
alternatives --config java  
</code></pre>

<p>(Chọn phiên bản Java muốn sử dụng)</p>

<p>Thay thế các thành phần khác như <code>jar</code> và <code>javac</code>:</p>

<pre><code>alternatives --install /usr/bin/jar jar /opt/jdk1.8.0_72/bin/jar 2  
alternatives --install /usr/bin/javac javac /opt/jdk1.8.0_72/bin/javac 2  
alternatives --set jar /opt/jdk1.8.0_72/bin/jar  
alternatives --set javac /opt/jdk1.8.0_72/bin/javac  
</code></pre>

<p>Kiểm tra lại xem việc nâng cấp đã thành công hay chưa?</p>

<pre><code>java -version  
</code></pre>

<p>Export các biến môi trường của Java  </p>

<pre><code>export JAVA_HOME=/opt/jdk1.8.0_72  
export JRE_HOME=/opt/jdk1.8.0_72/jre  
export PATH=$PATH:/opt/jdk1.8.0_72/bin:/opt/jdk1.8.0_72/jre/bin  
</code></pre>

<p>Kiểm tra</p>

<pre><code>printenv  
</code></pre>

<hr>

<h3 id="resetmtkhurootcamysql">Reset Mật khẩu Root của MySQL</h3>

<p>Stop dịch vụ mysqld</p>

<pre><code>sudo /etc/init.d/mysqld stop  
</code></pre>

<p>Vào Safemode</p>

<pre><code>sudo mysqld_safe --skip-grant-tables &amp;  
</code></pre>

<p>Đăng nhập vào Root (sẽ không bị hỏi mật khẩu  vì đang ở Safemode)</p>

<pre><code>mysql -uroot  
</code></pre>

<p>Reset mật khẩu:</p>

<pre><code>use mysql;  
update user set authentication_string=PASSWORD("mynewpassword") where User='root';  
flush privileges;  
quit  
</code></pre>

<p>Stop Safemode và khởi động lại Mysqld:</p>

<pre><code>sudo /etc/init.d/mysqld stop  
sudo /etc/init.d/mysqld start  
</code></pre>

<p>Đăng nhập thử với mật khẩu đã set</p>

<pre><code>mysql -u root -p  
</code></pre>

<p>Have fun!</p>
        </section>

        <footer class="post-footer">

                <section class="author">
                    <h3>Duong Vi Phat</h3>
                    <p></p>
                </section>

            <section class="share">
                <h3>Share this</h3>
                <a class="icon-twitter" href="http://twitter.com/share?text=%5BTIL%5D%20Upgrade%20JDK%20Version%20v%C3%A0%20Reset%20m%E1%BA%ADt%20kh%E1%BA%A9u%20MySQL%20tr%C3%AAn%20CentOS&amp;url=http://localhost:2368/reset-mat-khau-mysql-tren-centos/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/reset-mat-khau-mysql-tren-centos/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:2368/reset-mat-khau-mysql-tren-centos/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


    </article>

</main>


    <footer class="site-footer">
        <!-- <a class="subscribe icon-feed" href="http://localhost:2368/rss/"><span class="tooltip">Subscribe!</span></a> -->
        <div class="inner">
             <section class="social_links">
                <a href="https://twitter.com/viphat" target="_blank">
                  <i class="fa fa-twitter-square fa-2x"></i>
                </a>
                <a href="https://www.facebook.com/viphat" target="_blank">
                  <i class="fa fa-facebook-square fa-2x"></i>
                </a>
                <a href="https://github.com/viphat" target="_blank">
                  <i class="fa fa-github-square fa-2x"></i>
                </a>
             </section>
             <section class="copyright">All content copyright <a href="../">viphat's notes</a> © 2014-2015 • All rights reserved.</section>
             <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://ghost.org">Ghost</a> in <a href="https://github.com/viphat/The-Shell">The Shell</a> theme.</section>
        </div>
    </footer>

        <div class="main-menu-ovrl main-menu-ovrl-hugeinc js-main-menu-ovrl">
    <i class="fa fa-times main-menu-ovrl-close js-main-menu-close" style="margin-left: 5px; font-size:30px;"></i>
</div>

    <!-- You can safely delete this line if your theme does not require jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-53685619-1', 'auto');
      ga('send', 'pageview');
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
    <script type="text/javascript" src="../assets/js/jqcloud-1.0.4.js"></script>
    <script type="text/javascript" src="../assets/js/toc.min.js"></script>
    <script type="text/javascript" src="../assets/js/shell.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.min.js"></script>
</body>
